using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using AloneWar.Common.TaskHelper;
using UnityEngine;
using AloneWar.Unit.Component;
using AloneWar.DataObject.Sqlite.SqliteObject;
using AloneWar.Stage.FieldObject;
using AloneWar.Stage.Component;
using AloneWar.Stage.Event.EventObject;
using AloneWar.Unit.Status;

namespace AloneWar.Stage
{
    public class StageObjectController : TaskCoroutineBeahavior
    {
        /// <summary>
        /// 汎用移動イベント
        /// </summary>
        public List<PositionEvent> MoveEvent { get { return this.moveEvent; } set { this.moveEvent = value; } }
        private List<PositionEvent> moveEvent = new List<PositionEvent>();

        public IEnumerator Move()
        {
            Coroutine coroutine = StartCoroutine("");
            
            yield return null;
        }

        public void UpdateObjectPosition(BaseStageObject baseStageObject, int positionId)
        {
            baseStageObject.BeforePositionId = baseStageObject.PositionId;
            baseStageObject.PositionId = positionId;
            this.MoveEvent.ForEach(m => {
                m.SetVaildEvent(positionId);
            });
        }
    }

    /// <summary>
    /// ユニット単位のコントローラ
    /// </summary>
    public class UnitObjectController
    {
        public List<MassRange> MassRangeList { get; set; }
        private List<MassRange> massRangeList = new List<MassRange>();

        public void SetRange<T>(UnitObjectStatus<T> unitObjectStatus)
        {
            int positionId = unitObjectStatus.StageStatus.PositionId;
            int move = unitObjectStatus.BaseStatus.Move;
            int range = unitObjectStatus.BaseStatus.Range;

            while (true)
            {
                
                break;
            }

        }
    }

    public class MassRange
    {
        public int Move { get; set; }

        public MassComponent MassComponent { get; set; }

        public MassRange(int positionId, int move)
        {
            this.Move = move;
        }
    }
}
